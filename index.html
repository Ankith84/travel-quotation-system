<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DreamScape Journey - AI Quotation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      padding: 20px;
    }
    .step {
      display: inline-block;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 25px;
      background: #ddd;
    }
    .step.active { background: #6366f1; color: white; }
    .hidden { display: none; }
    .upload-zone {
      border: 2px dashed #ccc;
      border-radius: 10px;
      text-align: center;
      padding: 30px;
      margin: 20px 0;
      cursor: pointer;
    }
    .btn {
      padding: 10px 20px;
      background: #6366f1;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
    }
    .btn-secondary {
      background: #e5e7eb;
      color: #111;
    }
    .quotation-preview {
      background: #f3f4f6;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>DreamScape Journey</h1>
  <p>AI-Powered Travel Quotation Generator</p>

  <!-- Steps -->
  <div>
    <span id="s1" class="step active">Upload</span>
    <span id="s2" class="step">Preview</span>
    <span id="s3" class="step">Done</span>
  </div>

  <!-- Step 1 -->
  <div id="uploadSection">
    <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
      üìÑ Click to upload DMC Quotation
      <input type="file" id="fileInput" style="display:none">
    </div>
    <label>Markup: <span id="markupValue">15</span>%</label>
    <input type="range" min="5" max="50" value="15" id="markupSlider">
  </div>

  <!-- Step 2 -->
  <div id="previewSection" class="hidden">
    <div class="quotation-preview" id="quotationContent"></div>
    <div style="text-align:center">
      <button class="btn-secondary btn" onclick="goToStep(1)">‚¨Ö Adjust</button>
      <button class="btn" onclick="goToStep(3)">Generate PDF</button>
    </div>
  </div>

  <!-- Step 3 -->
  <div id="successSection" class="hidden" style="text-align:center">
    <h2>‚úÖ Quotation Generated!</h2>
    <button class="btn" onclick="goToStep(1)">Process Another</button>
  </div>
</div>

<script>
let extractedData = null;
document.getElementById('fileInput').addEventListener('change', handleFileUpload);
document.getElementById('markupSlider').addEventListener('input', e => {
  document.getElementById('markupValue').textContent = e.target.value;
  if(extractedData) renderQuotation();
});

function goToStep(step) {
  document.getElementById('s1').classList.toggle('active', step===1);
  document.getElementById('s2').classList.toggle('active', step===2);
  document.getElementById('s3').classList.toggle('active', step===3);
  document.getElementById('uploadSection').classList.toggle('hidden', step!==1);
  document.getElementById('previewSection').classList.toggle('hidden', step!==2);
  document.getElementById('successSection').classList.toggle('hidden', step!==3);
  if(step===2) renderQuotation();
}

function handleFileUpload(event) {
  const file = event.target.files[0];
  if(!file) return;

  // Simulate AI Extraction (replace with real parsing later)
  extractedData = {
    destination: "Bali, Indonesia",
    duration: "5 Nights / 6 Days",
    pax: "2 Adults",
    baseCost: 45000
  };
  goToStep(2);
}

function calculateFinalCost() {
  if(!extractedData) return 0;
  const markup = parseInt(document.getElementById('markupSlider').value);
  return Math.round(extractedData.baseCost * (1 + markup/100));
}

function renderQuotation() {
  const finalCost = calculateFinalCost();
  document.getElementById('quotationContent').innerHTML = `
    <h2>üìç ${extractedData.destination}</h2>
    <p>üìÖ ${extractedData.duration}</p>
    <p>üë• ${extractedData.pax}</p>
    <h3>üí∞ Final Price: ‚Çπ${finalCost.toLocaleString()}</h3>
    <small>Base: ‚Çπ${extractedData.baseCost.toLocaleString()} + Markup</small>
  `;
}
</script>
</body>
</html>
