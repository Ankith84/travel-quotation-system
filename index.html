import React, { useState, useRef } from 'react';
import { Upload, Download, FileText, MapPin, Calendar, Users, DollarSign, Settings, Eye, Check, Edit } from 'lucide-react';
import * as mammoth from 'mammoth';
import pdfParse from 'pdf-parse';

const TravelQuotationSystem = () => {
    const [uploadedFile, setUploadedFile] = useState(null);
    const [extractedData, setExtractedData] = useState(null);
    const [companyLogo, setCompanyLogo] = useState(null);
    const [markupPercentage, setMarkupPercentage] = useState(15);
    const [isProcessing, setIsProcessing] = useState(false);
    const [currentStep, setCurrentStep] = useState(1);
    const fileInputRef = useRef(null);
    const logoInputRef = useRef(null);
    const [isEditing, setIsEditing] = useState(false);

    // Sample company data - you can customize this
    const companyData = {
        name: "DreamScape Journey",
        tagline: "Creating Unforgettable Travel Experiences",
        address: "123 Travel Street, Hyderabad, Telangana 500001",
        phone: "+91 9876543210",
        email: "info@dreamscapejourney.com",
        website: "www.dreamscapejourney.com"
    };

    // Sample policies
    const policies = {
        payment: [
            "25% advance payment required at the time of booking",
            "75% balance payment to be made 15 days before departure",
            "Full payment required for bookings made within 15 days of departure",
            "All payments are non-refundable and non-transferable"
        ],
        cancellation: [
            "More than 30 days: 10% of total cost",
            "15-30 days: 25% of total cost",
            "7-15 days: 50% of total cost",
            "Less than 7 days: 100% of total cost"
        ],
        terms: [
            "Prices are subject to availability and confirmation",
            "Package rates are per person on twin sharing basis",
            "Additional charges may apply for peak season travel",
            "Travel insurance is highly recommended"
        ]
    };

    const parseExtractedText = (text) => {
        const lines = text.split('\n').filter(line => line.trim().length > 0);
        let parsedData = {
            destination: 'Travel Destination',
            duration: '5 Days 4 Nights',
            pax: '2 Adults',
            startDate: '',
            endDate: '',
            hotels: [],
            inclusions: [],
            exclusions: [],
            itinerary: [],
            baseCost: 0,
            costBreakdown: []
        };

        let currentSection = '';
        let dayCounter = 0;

        lines.forEach(line => {
            const lowerLine = line.toLowerCase();
            if (lowerLine.includes('itinerary')) {
                currentSection = 'itinerary';
                return;
            }
            if (lowerLine.includes('inclusion')) {
                currentSection = 'inclusions';
                return;
            }
            if (lowerLine.includes('exclusion')) {
                currentSection = 'exclusions';
                return;
            }
            if (lowerLine.includes('hotel') || lowerLine.includes('accommodation')) {
                currentSection = 'hotels';
                return;
            }

            // General Info Extraction (always try to extract)
            const destinationMatch = lowerLine.match(/(?:destination|location|to|for)[:\s]*(.*)/i);
            if (destinationMatch && !parsedData.destination.includes('Travel')) parsedData.destination = destinationMatch[1].trim();
            
            const durationMatch = lowerLine.match(/(\d+)\s*(?:days?|nights?)\s*(\d+)\s*(?:days?|nights?)/i) || lowerLine.match(/(\d+)\s*(?:days?|nights?)/i);
            if (durationMatch && !parsedData.duration.includes('Days')) parsedData.duration = `${durationMatch[1]} Days ${durationMatch[1] - 1} Nights`;

            const paxMatch = lowerLine.match(/(\d+)\s*(?:pax|persons?|adults?|people)/i);
            if (paxMatch && !parsedData.pax.includes('Adults')) parsedData.pax = `${paxMatch[1]} Adults`;

            const costMatch = line.match(/(?:rs\.?|₹|inr)\s*([\d,]+)/i);
            if (costMatch) {
                const cost = parseInt(costMatch[1].replace(/,/g, ''));
                if (cost > 1000) parsedData.baseCost = cost;
            }

            // Section-specific parsing
            if (currentSection === 'inclusions' || currentSection === 'exclusions') {
                const listMatch = line.match(/^\s*[-•*]\s*(.*)/);
                if (listMatch) {
                    if (currentSection === 'inclusions') parsedData.inclusions.push(listMatch[1].trim());
                    if (currentSection === 'exclusions') parsedData.exclusions.push(listMatch[1].trim());
                }
            } else if (currentSection === 'itinerary') {
                const dayMatch = lowerLine.match(/day\s*(\d+)[:\s]*(.*)/);
                if (dayMatch) {
                    dayCounter = parseInt(dayMatch[1]);
                    parsedData.itinerary.push({
                        day: dayCounter,
                        title: dayMatch[2].trim() || 'Day Title',
                        activities: []
                    });
                } else if (dayCounter > 0 && line.trim()) {
                    const lastDay = parsedData.itinerary[parsedData.itinerary.length - 1];
                    if (lastDay) lastDay.activities.push(line.trim());
                }
            } else if (currentSection === 'hotels') {
                const hotelMatch = line.match(/(?:hotel|resort|accommodation)[:\s]*(.*)/i);
                if (hotelMatch) {
                    parsedData.hotels.push({
                        name: hotelMatch[1].trim(),
                        location: parsedData.destination,
                        nights: 1,
                        roomType: 'Standard Room'
                    });
                }
            }
        });

        // Fallbacks if data isn't found
        if (parsedData.inclusions.length === 0) parsedData.inclusions = policies.terms;
        if (parsedData.exclusions.length === 0) parsedData.exclusions = policies.terms;
        if (parsedData.itinerary.length === 0) {
            // Generate a simple fallback itinerary
            const days = parseInt(parsedData.duration.split(' ')[0]) || 5;
            for (let i = 1; i <= days; i++) {
                parsedData.itinerary.push({ day: i, title: `Day ${i} in ${parsedData.destination}`, activities: [`Explore ${parsedData.destination}`] });
            }
        }
        if (parsedData.hotels.length === 0) parsedData.hotels = [{ name: 'Standard Hotel', location: parsedData.destination, nights: 4, roomType: 'Standard' }];
        if (parsedData.baseCost === 0) parsedData.baseCost = 50000;

        return parsedData;
    };

    const handleFileUpload = async (event) => {
        const file = event.target.files[0];
        if (!file) return;

        setUploadedFile(file);
        setIsProcessing(true);

        try {
            let extractedText = '';
            const fileArrayBuffer = await file.arrayBuffer();

            if (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
                const result = await mammoth.extractRawText({ arrayBuffer: fileArrayBuffer });
                extractedText = result.value;
            } else if (file.type === 'application/pdf') {
                const data = await pdfParse(fileArrayBuffer);
                extractedText = data.text;
            } else {
                alert('Please upload a PDF or Word document.');
                setIsProcessing(false);
                return;
            }

            const parsedData = parseExtractedText(extractedText);
            setExtractedData(parsedData);
            setCurrentStep(2);
        } catch (error) {
            console.error('Error processing file:', error);
            alert('Error processing file. Please ensure it is a valid PDF or Word document.');
        }

        setIsProcessing(false);
    };

    const handleLogoUpload = (event) => {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (e) => setCompanyLogo(e.target.result);
            reader.readAsDataURL(file);
        }
    };

    const handleDataChange = (e, section, index, field) => {
        const { value } = e.target;
        setExtractedData(prevData => {
            const newData = { ...prevData };
            if (section === 'main') {
                newData[field] = value;
            } else {
                newData[section] = newData[section].map((item, i) =>
                    i === index ? { ...item, [field]: value } : item
                );
            }
            return newData;
        });
    };

    const calculateFinalCost = () => {
        if (!extractedData) return 0;
        return Math.round(extractedData.baseCost * (1 + markupPercentage / 100));
    };

    const generateQuotation = () => {
        setCurrentStep(3);
        // In a real implementation, this would generate and download a PDF
        setTimeout(() => {
            alert('Quotation PDF generated successfully! (In real implementation, this would download the PDF)');
        }, 1000);
    };

    const QuotationPreview = () => {
        if (!extractedData) return null;

        const finalCost = calculateFinalCost();
        const markupAmount = finalCost - extractedData.baseCost;

        const formatDate = (dateString) => {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' });
        };

        const today = new Date();
        const startDate = new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000);
        const duration = parseInt(extractedData.duration.match(/(\d+)/)[1]);
        const endDate = new Date(startDate.getTime() + (duration - 1) * 24 * 60 * 60 * 1000);
        
        const displayStartDate = isEditing ? extractedData.startDate : formatDate(startDate);
        const displayEndDate = isEditing ? extractedData.endDate : formatDate(endDate);

        return (
            <div className="bg-white rounded-2xl shadow-2xl overflow-hidden max-w-4xl mx-auto">
                <div className="bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white p-8">
                    <div className="flex items-center justify-between">
                        <div className="flex items-center space-x-4">
                            {companyLogo && (
                                <img src={companyLogo} alt="Logo" className="h-16 w-16 rounded-lg bg-white/20 p-2" />
                            )}
                            <div>
                                <h1 className="text-3xl font-bold">{companyData.name}</h1>
                                <p className="text-blue-100 text-lg">{companyData.tagline}</p>
                            </div>
                        </div>
                        <div className="text-right">
                            <p className="text-sm opacity-90">Quotation Date</p>
                            <p className="font-semibold">{new Date().toLocaleDateString()}</p>
                        </div>
                    </div>
                </div>

                <div className="p-8">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div className="bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl">
                            <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                                <MapPin className="mr-2 text-blue-600" />
                                {isEditing ? (
                                    <input
                                        type="text"
                                        value={extractedData.destination}
                                        onChange={e => handleDataChange(e, 'main', null, 'destination')}
                                        className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                    />
                                ) : (
                                    extractedData.destination
                                )}
                            </h2>
                            <div className="grid grid-cols-2 gap-4 text-sm">
                                <div className="flex items-center">
                                    <Calendar className="mr-2 text-gray-600 h-4 w-4" />
                                    {isEditing ? (
                                        <input
                                            type="text"
                                            value={extractedData.duration}
                                            onChange={e => handleDataChange(e, 'main', null, 'duration')}
                                            className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                        />
                                    ) : (
                                        <span>{extractedData.duration}</span>
                                    )}
                                </div>
                                <div className="flex items-center">
                                    <Users className="mr-2 text-gray-600 h-4 w-4" />
                                    {isEditing ? (
                                        <input
                                            type="text"
                                            value={extractedData.pax}
                                            onChange={e => handleDataChange(e, 'main', null, 'pax')}
                                            className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                        />
                                    ) : (
                                        <span>{extractedData.pax}</span>
                                    )}
                                </div>
                                <div className="col-span-2 mt-2">
                                    <span className="text-gray-600">Travel Dates: </span>
                                    <span className="font-semibold">{displayStartDate} to {displayEndDate}</span>
                                </div>
                            </div>
                        </div>

                        <div className="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl">
                            <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <DollarSign className="mr-2 text-green-600" />
                                Package Cost
                            </h3>
                            <div className="text-3xl font-bold text-green-600 mb-2">₹{finalCost.toLocaleString()}</div>
                            <p className="text-sm text-gray-600">Per person on twin sharing basis</p>
                            <div className="mt-2 text-xs text-gray-500">
                                Base cost: ₹{extractedData.baseCost.toLocaleString()} + Markup: ₹{markupAmount.toLocaleString()}
                            </div>
                        </div>
                    </div>

                    <div className="mb-8">
                        <h3 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <Calendar className="mr-3 text-blue-600" />
                            Detailed Itinerary
                        </h3>
                        <div className="space-y-4">
                            {extractedData.itinerary.map((day, dayIndex) => (
                                <div key={day.day} className="border-l-4 border-blue-500 pl-6 py-4 bg-gray-50 rounded-r-lg">
                                    <h4 className="font-bold text-lg text-gray-800">
                                        Day {day.day}:
                                        {isEditing ? (
                                            <input
                                                type="text"
                                                value={day.title}
                                                onChange={e => handleDataChange(e, 'itinerary', dayIndex, 'title')}
                                                className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                            />
                                        ) : (
                                            ` ${day.title}`
                                        )}
                                    </h4>
                                    <ul className="mt-2 space-y-1">
                                        {day.activities.map((activity, idx) => (
                                            <li key={idx} className="text-gray-700 flex items-start">
                                                <div className="w-2 h-2 bg-blue-500 rounded-full mr-3 mt-2"></div>
                                                {isEditing ? (
                                                    <input
                                                        type="text"
                                                        value={activity}
                                                        onChange={e => {
                                                            const newActivities = [...day.activities];
                                                            newActivities[idx] = e.target.value;
                                                            handleDataChange({ target: { value: newActivities } }, 'itinerary', dayIndex, 'activities');
                                                        }}
                                                        className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                                    />
                                                ) : (
                                                    activity
                                                )}
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="mb-8">
                        <h3 className="text-2xl font-bold text-gray-800 mb-6">Accommodation</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {extractedData.hotels.map((hotel, idx) => (
                                <div key={idx} className="bg-gradient-to-br from-orange-50 to-red-50 p-6 rounded-xl">
                                    <h4 className="font-bold text-lg text-gray-800">
                                        {isEditing ? (
                                            <input
                                                type="text"
                                                value={hotel.name}
                                                onChange={e => handleDataChange(e, 'hotels', idx, 'name')}
                                                className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                            />
                                        ) : (
                                            hotel.name
                                        )}
                                    </h4>
                                    <p className="text-gray-600">
                                        {isEditing ? (
                                            <input
                                                type="text"
                                                value={hotel.location}
                                                onChange={e => handleDataChange(e, 'hotels', idx, 'location')}
                                                className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                            />
                                        ) : (
                                            hotel.location
                                        )}
                                    </p>
                                    <div className="mt-2 text-sm">
                                        <span className="bg-orange-100 text-orange-800 px-2 py-1 rounded-full">
                                            {hotel.nights} nights • {hotel.roomType}
                                        </span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                        <div>
                            <h3 className="text-xl font-bold text-green-700 mb-4 flex items-center">
                                <Check className="mr-2" />
                                Package Inclusions
                            </h3>
                            <ul className="space-y-2">
                                {extractedData.inclusions.map((item, idx) => (
                                    <li key={idx} className="flex items-start">
                                        <Check className="mr-2 text-green-500 mt-0.5 h-4 w-4" />
                                        <span className="text-gray-700">
                                            {isEditing ? (
                                                <input
                                                    type="text"
                                                    value={item}
                                                    onChange={e => handleDataChange(e, 'inclusions', idx, 'value')}
                                                    className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                                />
                                            ) : (
                                                item
                                            )}
                                        </span>
                                    </li>
                                ))}
                            </ul>
                        </div>

                        <div>
                            <h3 className="text-xl font-bold text-red-700 mb-4">Package Exclusions</h3>
                            <ul className="space-y-2">
                                {extractedData.exclusions.map((item, idx) => (
                                    <li key={idx} className="flex items-start">
                                        <div className="w-4 h-4 mr-2 mt-0.5 border-2 border-red-500 rounded"></div>
                                        <span className="text-gray-700">
                                            {isEditing ? (
                                                <input
                                                    type="text"
                                                    value={item}
                                                    onChange={e => handleDataChange(e, 'exclusions', idx, 'value')}
                                                    className="w-full bg-transparent border-b border-gray-400 focus:outline-none"
                                                />
                                            ) : (
                                                item
                                            )}
                                        </span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    </div>

                    <div className="bg-gray-50 p-8 rounded-2xl">
                        <h3 className="text-2xl font-bold text-gray-800 mb-6">Terms & Conditions</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h4 className="font-bold text-lg text-blue-700 mb-3">Payment Policy</h4>
                                <ul className="space-y-2 text-sm">
                                    {policies.payment.map((item, idx) => (
                                        <li key={idx} className="text-gray-700">• {item}</li>
                                    ))}
                                </ul>
                            </div>

                            <div>
                                <h4 className="font-bold text-lg text-red-700 mb-3">Cancellation Policy</h4>
                                <ul className="space-y-2 text-sm">
                                    {policies.cancellation.map((item, idx) => (
                                        <li key={idx} className="text-gray-700">• {item}</li>
                                    ))}
                                </ul>
                            </div>
                        </div>

                        <div className="mt-6">
                            <h4 className="font-bold text-lg text-gray-700 mb-3">Important Terms</h4>
                            <ul className="space-y-2 text-sm">
                                {policies.terms.map((item, idx) => (
                                    <li key={idx} className="text-gray-700">• {item}</li>
                                ))}
                            </ul>
                        </div>
                    </div>

                    <div className="mt-8 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-2xl">
                        <h3 className="text-xl font-bold mb-4">Contact Information</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <p><strong>Address:</strong> {companyData.address}</p>
                                <p><strong>Phone:</strong> {companyData.phone}</p>
                            </div>
                            <div>
                                <p><strong>Email:</strong> {companyData.email}</p>
                                <p><strong>Website:</strong> {companyData.website}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
            <div className="container mx-auto px-4 py-8">
                <div className="text-center mb-12">
                    <h1 className="text-4xl font-bold text-gray-800 mb-4">DreamScape Journey</h1>
                    <h2 className="text-2xl text-gray-600 mb-2">Quotation Automation System</h2>
                    <p className="text-gray-500">Transform DMC quotations into professional travel packages</p>
                </div>

                <div className="flex justify-center mb-12">
                    <div className="flex space-x-4">
                        {[
                            { step: 1, label: "Upload & Configure", icon: Upload },
                            { step: 2, label: "Review & Adjust", icon: Settings },
                            { step: 3, label: "Generate PDF", icon: Download }
                        ].map(({ step, label, icon: Icon }) => (
                            <div key={step} className={`flex items-center space-x-2 px-4 py-2 rounded-full ${
                                currentStep >= step
                                    ? 'bg-blue-600 text-white'
                                    : 'bg-gray-200 text-gray-600'
                            }`}>
                                <Icon size={20} />
                                <span className="font-medium">{label}</span>
                            </div>
                        ))}
                    </div>
                </div>

                {currentStep === 1 && (
                    <div className="max-w-2xl mx-auto space-y-8">
                        <div className="bg-white p-8 rounded-2xl shadow-lg">
                            <h3 className="text-xl font-bold text-gray-800 mb-6">Company Logo</h3>
                            <div
                                className="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition-colors cursor-pointer"
                                onClick={() => logoInputRef.current?.click()}
                            >
                                {companyLogo ? (
                                    <img src={companyLogo} alt="Company Logo" className="h-20 mx-auto mb-4" />
                                ) : (
                                    <Upload className="mx-auto h-12 w-12 text-gray-400 mb-4" />
                                )}
                                <p className="text-gray-600">Click to upload your company logo</p>
                                <input
                                    ref={logoInputRef}
                                    type="file"
                                    accept="image/*"
                                    onChange={handleLogoUpload}
                                    className="hidden"
                                />
                            </div>
                        </div>

                        <div className="bg-white p-8 rounded-2xl shadow-lg">
                            <h3 className="text-xl font-bold text-gray-800 mb-6">Upload DMC Quotation</h3>
                            <div
                                className="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition-colors cursor-pointer"
                                onClick={() => fileInputRef.current?.click()}
                            >
                                {uploadedFile ? (
                                    <div className="flex items-center justify-center space-x-2">
                                        <FileText className="h-8 w-8 text-blue-600" />
                                        <span className="text-gray-700 font-medium">{uploadedFile.name}</span>
                                    </div>
                                ) : (
                                    <>
                                        <Upload className="mx-auto h-12 w-12 text-gray-400 mb-4" />
                                        <p className="text-gray-600 mb-2">Drop your DMC quotation here or click to browse</p>
                                        <p className="text-sm text-gray-500">Supports PDF and Word documents</p>
                                    </>
                                )}
                                <input
                                    ref={fileInputRef}
                                    type="file"
                                    accept=".pdf,.doc,.docx"
                                    onChange={handleFileUpload}
                                    className="hidden"
                                />
                            </div>
                        </div>

                        <div className="bg-white p-8 rounded-2xl shadow-lg">
                            <h3 className="text-xl font-bold text-gray-800 mb-6">Markup Configuration</h3>
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Markup Percentage: {markupPercentage}%
                                    </label>
                                    <input
                                        type="range"
                                        min="5"
                                        max="50"
                                        value={markupPercentage}
                                        onChange={(e) => setMarkupPercentage(Number(e.target.value))}
                                        className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                    />
                                    <div className="flex justify-between text-xs text-gray-500 mt-1">
                                        <span>5%</span>
                                        <span>50%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {isProcessing && (
                            <div className="text-center">
                                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
                                <p className="text-gray-600 mt-4">Processing your quotation...</p>
                            </div>
                        )}
                    </div>
                )}

                {currentStep === 2 && (
                    <div className="space-y-8">
                        <div className="text-center">
                            <h3 className="text-2xl font-bold text-gray-800 mb-4">Review Your Quotation</h3>
                            <p className="text-gray-600">Make any final adjustments before generating the PDF</p>
                        </div>
                        <div className="flex justify-end space-x-2 mb-4">
                            <button
                                onClick={() => setIsEditing(!isEditing)}
                                className="px-4 py-2 bg-yellow-400 text-yellow-900 rounded-xl hover:bg-yellow-500 transition-colors flex items-center space-x-2"
                            >
                                <Edit size={20} />
                                <span>{isEditing ? 'Save Changes' : 'Edit Data'}</span>
                            </button>
                        </div>
                        <QuotationPreview />

                        <div className="flex justify-center space-x-4">
                            <button
                                onClick={() => setCurrentStep(1)}
                                className="px-8 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors flex items-center space-x-2"
                            >
                                <Settings size={20} />
                                <span>Adjust Settings</span>
                            </button>
                            <button
                                onClick={generateQuotation}
                                className="px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-colors flex items-center space-x-2"
                            >
                                <Download size={20} />
                                <span>Generate PDF</span>
                            </button>
                        </div>
                    </div>
                )}

                {currentStep === 3 && (
                    <div className="text-center space-y-8">
                        <div className="max-w-md mx-auto">
                            <div className="bg-green-100 p-8 rounded-2xl">
                                <Check className="mx-auto h-16 w-16 text-green-600 mb-4" />
                                <h3 className="text-2xl font-bold text-green-800 mb-2">Quotation Generated!</h3>
                                <p className="text-green-700">Your professional travel quotation is ready for download.</p>
                            </div>
                        </div>

                        <div className="flex justify-center space-x-4">
                            <button
                                onClick={() => setCurrentStep(2)}
                                className="px-8 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors flex items-center space-x-2"
                            >
                                <Eye size={20} />
                                <span>Preview Again</span>
                            </button>
                            <button
                                onClick={() => setCurrentStep(1)}
                                className="px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-colors flex items-center space-x-2"
                            >
                                <Upload size={20} />
                                <span>New Quotation</span>
                            </button>
                        </div>
                    </div>
                )}
            </div>
        </div>
    );
};

export default TravelQuotationSystem;
